FROM node:23-alpine

WORKDIR /usr/app

ARG COMMIT_ID
ARG COMMIT_AUTHOR
ARG COMMIT_DATE

ENV COMMIT_ID=${COMMIT_ID}
ENV COMMIT_AUTHOR=${COMMIT_AUTHOR}
ENV COMMIT_DATE=${COMMIT_DATE}

COPY package*.json .

RUN npm install

COPY src ./src

EXPOSE 3000

ENTRYPOINT [ "npm" ]
CMD [ "run", "prod" ]